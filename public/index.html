<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Search Quality Analyzer - Bayezon</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body { font-family: 'Inter', system-ui, -apple-system, sans-serif; }
    .verdict-outreach { background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%); }
    .verdict-maybe { background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); }
    .verdict-skip { background: linear-gradient(135deg, #10b981 0%, #059669 100%); }
    .screenshot-container { aspect-ratio: 16/10; overflow: hidden; }
    .screenshot-container img { width: 100%; height: 100%; object-fit: cover; object-position: top; }
    .pulse { animation: pulse 2s infinite; }
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
    .collapsible-content { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out; }
    .collapsible-content.open { max-height: 2000px; }
  </style>
</head>
<body class="bg-slate-50 min-h-screen">
  <!-- Header -->
  <header class="bg-slate-900 text-white py-6">
    <div class="max-w-4xl mx-auto px-4">
      <h1 class="text-2xl font-bold">Search Quality Analyzer</h1>
      <p class="text-slate-400 text-sm mt-1">Find websites with broken search to pitch your solution</p>
    </div>
  </header>

  <main class="max-w-4xl mx-auto px-4 py-8">
    <!-- Input Form -->
    <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6 mb-8">
      <div class="grid md:grid-cols-2 gap-4 mb-4">
        <div>
          <label class="block text-sm font-medium text-slate-700 mb-2">Website</label>
          <input 
            type="text" 
            id="domain-input"
            placeholder="citybeach.com.au"
            class="w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-900"
          >
        </div>
        <div>
          <label class="block text-sm font-medium text-slate-700 mb-2">Natural Language Query</label>
          <input 
            type="text" 
            id="query-input"
            placeholder="dress for a night out"
            class="w-full px-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-slate-900"
          >
        </div>
      </div>
      
      <div class="flex items-center gap-4">
        <button 
          id="search-btn"
          onclick="startAnalysis()"
          class="flex-1 bg-slate-900 text-white py-3 px-6 rounded-lg font-medium hover:bg-slate-800 transition flex items-center justify-center gap-2"
        >
          <i class="fas fa-search"></i>
          Analyze Search Quality
        </button>
        <label class="flex items-center gap-2 text-sm text-slate-600 cursor-pointer">
          <input type="checkbox" id="analyze-toggle" checked class="rounded">
          <span>AI Analysis</span>
        </label>
      </div>
      
      <p class="text-xs text-slate-500 mt-3">
        <i class="fas fa-lightbulb text-amber-500 mr-1"></i>
        <strong>Tip:</strong> Use natural language queries like "comfortable running shoes for flat feet" instead of simple keywords like "shoes"
      </p>
    </div>

    <!-- Loading State -->
    <div id="loading-state" class="hidden">
      <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-8 text-center">
        <div class="inline-flex items-center justify-center w-16 h-16 bg-slate-100 rounded-full mb-4">
          <i class="fas fa-spinner fa-spin text-2xl text-slate-600"></i>
        </div>
        <p id="loading-message" class="text-slate-600 font-medium">Taking screenshots...</p>
        <div class="w-full bg-slate-200 rounded-full h-2 mt-4 max-w-xs mx-auto">
          <div id="progress-bar" class="bg-slate-900 h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
        </div>
      </div>
    </div>

    <!-- Results Section -->
    <div id="results-section" class="hidden space-y-6">
      
      <!-- Verdict Hero Card -->
      <div id="verdict-card" class="rounded-xl shadow-lg text-white p-8">
        <div class="flex items-start justify-between">
          <div>
            <div class="flex items-center gap-3 mb-2">
              <span id="verdict-badge" class="text-xs font-bold uppercase tracking-wider bg-white/20 px-3 py-1 rounded-full"></span>
            </div>
            <h2 id="verdict-title" class="text-3xl font-bold mb-2"></h2>
            <p id="verdict-insight" class="text-white/90 text-lg"></p>
          </div>
          <div id="verdict-score" class="text-6xl font-bold opacity-90"></div>
        </div>
      </div>

      <!-- Key Insight -->
      <div id="insight-card" class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
        <h3 class="font-semibold text-slate-900 mb-3 flex items-center gap-2">
          <i class="fas fa-bullseye text-red-500"></i>
          Your Email Hook
        </h3>
        <blockquote id="email-hook" class="text-lg text-slate-700 border-l-4 border-red-500 pl-4 italic"></blockquote>
        <button onclick="copyEmailHook()" class="mt-3 text-sm text-slate-500 hover:text-slate-700">
          <i class="fas fa-copy mr-1"></i> Copy to clipboard
        </button>
      </div>

      <!-- Screenshots -->
      <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
        <button onclick="toggleSection('screenshots')" class="w-full p-4 flex items-center justify-between hover:bg-slate-50 transition">
          <h3 class="font-semibold text-slate-900 flex items-center gap-2">
            <i class="fas fa-images text-blue-500"></i>
            Screenshots Evidence
          </h3>
          <i id="screenshots-chevron" class="fas fa-chevron-down text-slate-400"></i>
        </button>
        <div id="screenshots-content" class="collapsible-content open">
          <div class="grid md:grid-cols-3 gap-4 p-4 pt-0" id="screenshots-grid">
            <!-- Screenshots inserted here -->
          </div>
        </div>
      </div>

      <!-- What Happened -->
      <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
        <button onclick="toggleSection('details')" class="w-full p-4 flex items-center justify-between hover:bg-slate-50 transition">
          <h3 class="font-semibold text-slate-900 flex items-center gap-2">
            <i class="fas fa-clipboard-list text-purple-500"></i>
            What Happened
          </h3>
          <i id="details-chevron" class="fas fa-chevron-down text-slate-400"></i>
        </button>
        <div id="details-content" class="collapsible-content">
          <div class="p-4 pt-0 space-y-4" id="details-grid">
            <!-- Details inserted here -->
          </div>
        </div>
      </div>

      <!-- Full Analysis (collapsed) -->
      <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
        <button onclick="toggleSection('analysis')" class="w-full p-4 flex items-center justify-between hover:bg-slate-50 transition">
          <h3 class="font-semibold text-slate-900 flex items-center gap-2">
            <i class="fas fa-code text-slate-500"></i>
            Raw API Response (for Clay)
          </h3>
          <i id="analysis-chevron" class="fas fa-chevron-down text-slate-400"></i>
        </button>
        <div id="analysis-content" class="collapsible-content">
          <div class="p-4 pt-0">
            <pre id="raw-json" class="bg-slate-900 text-green-400 p-4 rounded-lg overflow-auto max-h-96 text-xs"></pre>
          </div>
        </div>
      </div>
    </div>

    <!-- Empty State -->
    <div id="empty-state" class="text-center py-16">
      <div class="inline-flex items-center justify-center w-20 h-20 bg-slate-100 rounded-full mb-4">
        <i class="fas fa-search text-3xl text-slate-400"></i>
      </div>
      <h3 class="text-xl font-semibold text-slate-600">Ready to analyze</h3>
      <p class="text-slate-500 mt-2">Enter a website and natural language query to test their search</p>
    </div>
  </main>

  <!-- Image Modal -->
  <div id="image-modal" class="hidden fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4" onclick="closeModal(event)">
    <div class="relative max-w-5xl w-full max-h-[90vh] overflow-auto bg-white rounded-lg">
      <button onclick="closeModal()" class="absolute top-4 right-4 w-10 h-10 bg-white rounded-full shadow-lg flex items-center justify-center text-slate-600 hover:text-slate-900 z-10">
        <i class="fas fa-times"></i>
      </button>
      <img id="modal-image" src="" alt="Screenshot" class="w-full">
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" class="fixed bottom-6 right-6 bg-slate-900 text-white px-4 py-3 rounded-lg shadow-lg transform translate-y-20 opacity-0 transition-all duration-300">
    <span id="toast-message"></span>
  </div>

  <script src="app.js"></script>
</body>
</html>
